<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Delivery Pro</title>
    <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FSortable%2F1.15.0%2FSortable.min.js&data=05%7C02%7C%7C56b4dc93b94849e265ad08de6c3434d5%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067168642995171%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=BsNDgY5awX4nDuSKtFcWuTMyMZtgzkVnXvF5yd5oi4c%3D&reserved=0"></script>
    <style>
        :root { --p: #2563eb; --bg: #f8fafc; --txt: #1e293b; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; color: var(--txt); }
        .nav { display: flex; background: white; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 100; }
        .nav button { flex: 1; padding: 15px; border: none; background: none; font-weight: bold; cursor: pointer; color: #64748b; }
        .nav button.active { color: var(--p); border-bottom: 3px solid var(--p); }
        .container { padding: 15px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); display: flex; align-items: center; }
        .handle { color: #cbd5e1; margin-right: 15px; cursor: grab; font-size: 20px; }
        .info { flex: 1; }
        .info h4 { margin: 0 0 5px 0; font-size: 16px; }
        .info p { margin: 0; font-size: 13px; color: #64748b; }
        .btn { padding: 10px 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; margin-left: 5px; }
        .btn-go { background: #22c55e; color: white; }
        .btn-add { background: var(--p); color: white; }
        .btn-full { background: #1e293b; color: white; width: 100%; padding: 18px; margin-bottom: 20px; font-size: 16px; border-radius: 12px; }
        .settings-box { background: white; padding: 15px; border-radius: 12px; }
        textarea { width: 100%; height: 200px; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px; box-sizing: border-box; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="nav">
    <button id="tab1" onclick="showTab('run')" class="active">Î£Î·Î¼ÎµÏÎ¹Î½ÏŒ Run</button>
    <button id="tab2" onclick="showTab('base')">Î’Î¬ÏƒÎ· (300+)</button>
    <button id="tab3" onclick="showTab('settings')">âš™ï¸</button>
</div>

<div id="run-page" class="container">
    <button class="btn-full" onclick="startFullRoute()">ğŸš€ START FULL ROUTE (ÎŒÎ»Î± Î¼Î±Î¶Î¯)</button>
    <div id="run-list"></div>
    <button onclick="clearRun()" style="width:100%; margin-top:20px; color:red; background:none; border:none;">ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î—Î¼Î­ÏÎ±Ï‚</button>
</div>

<div id="base-page" class="container hidden">
    <input type="text" id="search" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Î±Î³Î±Î¶Î¹Î¿Ï..." style="width:100%; padding:12px; border-radius:8px; border:1px solid #ddd; margin-bottom:15px;" onkeyup="renderBase()">
    <div id="base-list"></div>
</div>

<div id="settings-page" class="container hidden">
    <div class="settings-box">
        <h3>ÎœÎ±Î¶Î¹ÎºÎ® Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®</h3>
        <p style="font-size:12px;">ÎœÎ¿ÏÏ†Î®: ÎŒÎ½Î¿Î¼Î± | Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· | Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·</p>
        <textarea id="bulk-input" placeholder="Shop A | 123 Main St, Oakleigh | After 10am"></textarea>
        <button class="btn-add" style="width:100%; margin-top:10px; padding:15px;" onclick="importData()">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÏƒÏ„Î· Î’Î¬ÏƒÎ·</button>
        <button onclick="clearAllData()" style="width:100%; margin-top:30px; color:red; background:none; border:none;">âš ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î® ÎŒÎ»Ï‰Î½</button>
    </div>
</div>

<script>
    let baseData = JSON.parse(localStorage.getItem('delivery_base') || '[]');
    let runData = JSON.parse(localStorage.getItem('delivery_run') || '[]');

    function showTab(tab) {
        document.getElementById('run-page').classList.toggle('hidden', tab !== 'run');
        document.getElementById('base-page').classList.toggle('hidden', tab !== 'base');
        document.getElementById('settings-page').classList.toggle('hidden', tab !== 'settings');
        document.getElementById('tab1').classList.toggle('active', tab === 'run');
        document.getElementById('tab2').classList.toggle('active', tab === 'base');
        document.getElementById('tab3').classList.toggle('active', tab === 'settings');
    }

    function importData() {
        const input = document.getElementById('bulk-input').value;
        const lines = input.split('\n');
        lines.forEach(line => {
            const [name, addr, note] = line.split('|');
            if(name && addr) baseData.push({ id: Date.now() + Math.random(), name: name.trim(), addr: addr.trim(), note: note ? note.trim() : '' });
        });
        localStorage.setItem('delivery_base', JSON.stringify(baseData));
        alert('Î— Î²Î¬ÏƒÎ· ÎµÎ½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎµ!');
        renderBase();
    }

    function renderBase() {
        const search = document.getElementById('search').value.toLowerCase();
        const list = document.getElementById('base-list');
        list.innerHTML = '';
        baseData.filter(i => i.name.toLowerCase().includes(search)).forEach(item => {
            list.innerHTML += `<div class="card"><div class="info"><h4>${item.name}</h4><p>${item.addr}</p></div><button class="btn btn-add" onclick="addToRun(${item.id})">+</button></div>`;
        });
    }

    function addToRun(id) {
        const item = baseData.find(i => i.id === id);
        runData.push({...item});
        localStorage.setItem('delivery_run', JSON.stringify(runData));
        renderRun();
        alert('Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ ÏƒÏ„Î¿ Run!');
    }

    function renderRun() {
        const list = document.getElementById('run-list');
        list.innerHTML = '';
        runData.forEach((item, index) => {
            list.innerHTML += `<div class="card" data-id="${index}"><div class="handle">â˜°</div><div class="info"><h4>${item.name}</h4><p>${item.addr}</p></div><button class="btn btn-go" onclick="go('${item.addr}')">GO</button></div>`;
        });
    }

    function go(addr) {
        window.open(`https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3D%24&data=05%7C02%7C%7C56b4dc93b94849e265ad08de6c3434d5%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067168643009786%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=I4HKnvgQEaWgfdoWqlLlUgjJsTLcS%2FIjNCDbbsqKiJM%3D&reserved=0{encodeURIComponent(addr)}`, '_blank');
    }

    function startFullRoute() {
        if(runData.length === 0) return alert('Î ÏÏŒÏƒÎ¸ÎµÏƒÎµ Î¼ÎµÏÎ¹ÎºÎ¬ Î¼Î±Î³Î±Î¶Î¹Î¬ Ï€ÏÏÏ„Î±!');
        const origin = "Current+Location";
        const destination = encodeURIComponent(runData[runData.length - 1].addr);
        const waypoints = runData.slice(0, -1).map(i => encodeURIComponent(i.addr)).join('|');
        const url = `https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26origin%3D%24&data=05%7C02%7C%7C56b4dc93b94849e265ad08de6c3434d5%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067168643018904%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=AONQkUWsHkqKkcSvxxitiVWBBvLAQrleeCD4ZsKqK5Y%3D&reserved=0{origin}&destination=${destination}&waypoints=${waypoints}&travelmode=driving`;
        window.open(url, '_blank');
    }

    function clearRun() { if(confirm('ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÏƒÎ·Î¼ÎµÏÎ¹Î½Î®Ï‚ Î»Î¯ÏƒÏ„Î±Ï‚;')) { runData = []; localStorage.setItem('delivery_run', JSON.stringify(runData)); renderRun(); } }
    function clearAllData() { if(confirm('Î Î¡ÎŸÎ£ÎŸÎ§Î—! Î˜Î± ÏƒÎ²Î·ÏƒÏ„Î¿ÏÎ½ ÏŒÎ»Î± Ï„Î± 300 Î¼Î±Î³Î±Î¶Î¹Î¬. Î•Î¯ÏƒÎ±Î¹ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Ï‚;')) { localStorage.clear(); location.reload(); } }

    new Sortable(document.getElementById('run-list'), { handle: '.handle', animation: 150, onEnd: () => {
        let newRun = [];
        document.querySelectorAll('#run-list .card').forEach(el => { newRun.push(runData[el.dataset.id]); });
        runData = newRun;
        localStorage.setItem('delivery_run', JSON.stringify(runData));
    }});

    renderBase(); renderRun();
</script>
</body>
</html>

