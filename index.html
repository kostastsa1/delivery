<!DOCTYPE html>
<html lang="el">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
   <title>Delivery v69 - Deep Recovery</title>
   <style>
       :root { --p: #30d158; --bg: #000; --card: #1c1c1e; --txt: #fff; --accent: #0a84ff; }
       body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 120px; color: var(--txt); }
       .nav { display: flex; background: #000; padding-top: 50px; border-bottom: 1px solid #2c2c2e; position: sticky; top: 0; z-index: 1000; }
       .nav button { flex: 1; padding: 18px; border: none; background: none; font-weight: 700; color: #8e8e93; font-size: 13px; }
       .nav button.active { color: var(--p); border-bottom: 3px solid var(--p); }
       .container { padding: 16px; max-width: 600px; margin: auto; }
       .card { background: var(--card); border-radius: 16px; padding: 15px; margin-bottom: 12px; display: flex; align-items: center; border: 1px solid #2c2c2e; }
       .num-badge { background: var(--p); color: #000; min-width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 12px; margin-right: 12px; }
       .info { flex: 1; min-width: 0; }
       .info h4 { margin: 0; font-size: 16px; }
       .meta { display: flex; gap: 6px; margin-top: 6px; flex-wrap: wrap; }
       .tag { font-size: 11px; padding: 4px 8px; border-radius: 6px; font-weight: 700; background: rgba(10, 132, 255, 0.1); color: var(--accent); border: 1px solid var(--accent); }
       .hidden { display: none; }
       .btn-main { background: var(--p); color: #000; width: 100%; padding: 18px; border-radius: 12px; border: none; font-weight: 800; margin-bottom: 10px; }
   </style>
</head>
<body>

<div class="nav">
   <button id="t1" onclick="tab('run')" class="active">Î”Î™Î‘Î”Î¡ÎŸÎœÎ—</button>
   <button id="t2" onclick="tab('base')">Î Î•Î›Î‘Î¤Î•Î£</button>
   <button id="t3" onclick="tab('set')">âš™ï¸</button>
</div>

<div id="run-page" class="container">
   <div id="run-list"></div>
</div>

<div id="base-page" class="container hidden">
   <input type="text" id="search" style="width:100%; padding:15px; background:#1c1c1e; border:1px solid #2c2c2e; color:#fff; border-radius:12px; margin-bottom:15px;" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·..." onkeyup="renderBase()">
   <div id="base-list"></div>
</div>

<div id="set-page" class="container hidden">
   <button onclick="exportFullBackup()" class="btn-main" style="background:#5856d6; color:#fff;">ğŸ’¾ FULL BACKUP</button>
   <p style="font-size:12px; color:#8e8e93; text-align:center;">Î‘Î½ Î´ÎµÎ¹Ï‚ Ï„Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ ÏƒÎ¿Ï…, Ï€Î¬Ï„Î± Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ Î³Î¹Î± Backup Î±Î¼Î­ÏƒÏ‰Ï‚!</p>
</div>

<script>
   // Î— v69 Î¨Î‘Î§ÎÎ•Î™ Î Î‘ÎÎ¤ÎŸÎ¥ - Î£Îµ ÏŒÎ»Î± Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎ±Î¼Îµ
   function getStoredData() {
       const names = ['delivery_db', 'savedCustomers', 'deliveryCustomers', 'customers', 'myData'];
       for (let name of names) {
           let data = localStorage.getItem(name);
           if (data && JSON.parse(data).length > 0) {
               console.log("Found data in: " + name);
               return JSON.parse(data);
           }
       }
       return [];
   }

   let db = getStoredData();
   let rn = JSON.parse(localStorage.getItem('delivery_rn') || '[]');

   function tab(t) {
       document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
       document.getElementById(t + '-page').classList.remove('hidden');
       document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
       if(t==='run') renderRun();
       if(t==='base') renderBase();
       document.getElementById(t==='run'?'t1':t==='base'?'t2':'t3').classList.add('active');
   }

   function renderBase() {
       const s = document.getElementById('search').value.toLowerCase();
       const list = document.getElementById('base-list'); list.innerHTML = '';
       db.forEach((item, i) => {
           if(item.n.toLowerCase().includes(s)) {
               const div = document.createElement('div'); div.className = 'card';
               div.innerHTML = `<div class="num-badge">${i+1}</div>
                   <div class="info"><h4>${item.n}</h4><p>${item.a}</p>
                   <div class="meta">
                    ${(item.t || item.time) ? `<span class="tag">âŒš ${item.t || item.time}</span>` : ''}
                    ${(item.k || item.note || item.key) ? `<span class="tag">ğŸ”‘ ${item.k || item.note || item.key}</span>` : ''}
                   </div></div>`;
               list.appendChild(div);
           }
       });
   }

   function exportFullBackup() {
       const text = db.map(c => `${c.n || c.name} .. ${c.a || c.address} .. ${c.t || c.time || ''} .. ${c.k || c.note || c.key || ''}`).join('\n');
       navigator.clipboard.writeText(text).then(() => alert('Î‘Î½Ï„Î¹Î³ÏÎ¬Ï†Î·ÎºÎµ!'));
   }

   tab('base'); // ÎÎµÎºÎ¹Î½Î¬Î¼Îµ Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ Î³Î¹Î± Î½Î± Î´Î¿ÏÎ¼Îµ Î±Î½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½
</script>
</body>
</html>
