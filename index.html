<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Delivery Pro ULTIMATE</title>
    <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FSortable%2F1.15.0%2FSortable.min.js&data=05%7C02%7C%7C9ba342eccc764b6a05c908de6c3a6aa8%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067195317104649%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=fH3YRPXpzLY1fQuN1JF%2B0CUl%2B2GL%2F%2BKiNGmKPwXV094%3D&reserved=0"></script>
    <style>
        :root { --p: #2563eb; --bg: #f8fafc; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 100px; color: #1e293b; }
        .nav { display: flex; background: white; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 100; }
        .nav button { flex: 1; padding: 16px; border: none; background: none; font-weight: bold; color: #64748b; font-size: 14px; }
        .nav button.active { color: var(--p); border-bottom: 3px solid var(--p); }
        .container { padding: 16px; }
        .card { background: white; border-radius: 12px; padding: 14px; margin-bottom: 10px; display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; }
        .handle { color: #cbd5e1; margin-right: 12px; font-size: 20px; }
        .info { flex: 1; }
        .info h4 { margin: 0; font-size: 15px; font-weight: 600; }
        .info p { margin: 3px 0 0 0; font-size: 12px; color: #64748b; }
        .btn-go { background: #22c55e; color: white; padding: 8px 14px; border-radius: 8px; border: none; font-weight: bold; font-size: 13px; }
        .btn-full { background: #1e293b; color: white; width: 100%; padding: 18px; font-size: 16px; border-radius: 12px; border: none; font-weight: bold; margin-bottom: 15px; cursor: pointer; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="nav">
    <button id="t1" onclick="tab('run')" class="active">Î£Î—ÎœÎ•Î¡Î™ÎÎŸ RUN</button>
    <button id="t2" onclick="tab('base')">Î’Î‘Î£Î—</button>
    <button id="t3" onclick="tab('set')">âš™ï¸</button>
</div>

<div id="run-page" class="container">
    <button class="btn-full" onclick="startRoute()">ğŸš€ Î•ÎšÎšÎ™ÎÎ—Î£Î— Î”Î™Î‘Î”Î¡ÎŸÎœÎ—Î£</button>
    <div id="run-list"></div>
</div>

<div id="base-page" class="container hidden">
    <input type="text" id="search" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î¼Î±Î³Î±Î¶Î¹Î¿Ï..." style="width:100%; padding:14px; border-radius:10px; border:1px solid #cbd5e1; margin-bottom:15px; box-sizing: border-box;" onkeyup="render()">
    <div id="base-list"></div>
</div>

<div id="set-page" class="container hidden">
    <div style="background:white; padding:18px; border-radius:12px; border:1px solid #e2e8f0;">
        <h3 style="margin-top:0">ÎœÎ±Î¶Î¹ÎºÎ® Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®</h3>
        <p style="font-size:12px; color:#64748b">ÎœÎ¿ÏÏ†Î®: ÎŒÎ½Î¿Î¼Î± | Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·</p>
        <textarea id="bulk" style="width:100%; height:180px; margin-bottom:12px; border-radius:8px; padding:10px; border:1px solid #cbd5e1; box-sizing: border-box;" placeholder="Shop A | 123 Main St, Oakleigh"></textarea>
        <button onclick="save()" style="width:100%; padding:14px; background:var(--p); color:white; border:none; border-radius:8px; font-weight:bold;">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÏƒÏ„Î· Î’Î¬ÏƒÎ·</button>
        <button onclick="if(confirm('Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏŒÎ»Ï‰Î½;')) { localStorage.clear(); location.reload(); }" style="width:100%; margin-top:20px; color:#ef4444; background:none; border:none; font-size:13px;">âš ï¸ ÎŸÎ»Î¹ÎºÎ® Î”Î¹Î±Î³ÏÎ±Ï†Î®</button>
    </div>
</div>

<script>
    let base = JSON.parse(localStorage.getItem('db') || '[]');
    let run = JSON.parse(localStorage.getItem('rn') || '[]');

    function tab(t) {
        document.getElementById('run-page').classList.toggle('hidden', t!=='run');
        document.getElementById('base-page').classList.toggle('hidden', t!=='base');
        document.getElementById('set-page').classList.toggle('hidden', t!=='set');
        document.getElementById('t1').classList.toggle('active', t==='run');
        document.getElementById('t2').classList.toggle('active', t==='base');
        document.getElementById('t3').classList.toggle('active', t==='set');
    }

    function save() {
        const val = document.getElementById('bulk').value;
        if(!val) return;
        val.split('\n').forEach(l => {
            let p = l.split('|');
            if(p[1]) base.push({n: p[0].trim(), a: p[1].trim()});
        });
        localStorage.setItem('db', JSON.stringify(base));
        document.getElementById('bulk').value = '';
        render(); tab('base');
    }

    function render() {
        let s = document.getElementById('search').value.toLowerCase();
        let bl = document.getElementById('base-list'); bl.innerHTML = '';
        base.filter(i => i.n.toLowerCase().includes(s)).forEach((i, idx) => {
            let d = document.createElement('div'); d.className = 'card';
            d.innerHTML = `<div class="info"><h4>${i.n}</h4><p>${i.a}</p></div><button class="btn-go" style="background:#2563eb">Î Î¡ÎŸÎ£Î˜Î—ÎšÎ—</button>`;
            d.querySelector('button').onclick = () => { run.push(i); localStorage.setItem('rn', JSON.stringify(run)); renderRun(); };
            bl.appendChild(d);
        });
    }

    function renderRun() {
        let rl = document.getElementById('run-list'); rl.innerHTML = '';
        run.forEach((i, idx) => {
            let d = document.createElement('div'); d.className = 'card'; d.dataset.id = idx;
            d.innerHTML = `<div class="handle">â˜°</div><div class="info"><h4>${i.n}</h4><p>${i.a}</p></div><button class="btn-go" onclick="window.open('https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3D&data=05%7C02%7C%7C9ba342eccc764b6a05c908de6c3a6aa8%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067195317119546%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=uhEK6cl0yAgbyryiq3zMwGMZR%2Bn%2Bfs23HBD%2FNz8B7So%3D&reserved=0' + encodeURIComponent('${i.a}'), '_blank')">GO</button>`;
            rl.appendChild(d);
        });
    }

    function startRoute() {
        if(run.length === 0) return alert('Î ÏÏŒÏƒÎ¸ÎµÏƒÎµ ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Î±Ï€ÏŒ Ï„Î· Î’Î¬ÏƒÎ·!');
        let stops = [...run];
        let last = stops.pop();
        let waypoints = stops.map(s => encodeURIComponent(s.a)).join('|');
        let destination = encodeURIComponent(last.a);
       
        // Î‘Î¥Î¤ÎŸ Î•Î™ÎÎ‘Î™ Î¤ÎŸ URL Î ÎŸÎ¥ Î”ÎŸÎ¥Î›Î•Î¥Î•Î™ Î Î‘ÎÎ¤Î‘ Î£Î• IPHONE
        let url = `https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3D%24&data=05%7C02%7C%7C9ba342eccc764b6a05c908de6c3a6aa8%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067195317127743%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=jL4k1%2BKXCh%2F5C1RLQhQO1pB63j2O360lQyOypsCb1Ks%3D&reserved=0{destination}&waypoints=${waypoints}&travelmode=driving`;
       
        window.open(url, '_blank');
    }

    new Sortable(document.getElementById('run-list'), { handle: '.handle', animation: 150, onEnd: () => {
        let nr = []; document.querySelectorAll('#run-list .card').forEach(e => {
            nr.push(run[e.dataset.id]);
        });
        run = nr; localStorage.setItem('rn', JSON.stringify(run));
    }});

    render(); renderRun();
</script>
</body>
</html>
