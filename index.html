<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Delivery Pro 2026</title>
    <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FSortable%2F1.15.0%2FSortable.min.js&data=05%7C02%7C%7Cc43da55de20d4a8b2bb608de6c3b4a29%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067199064404668%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=NkPFDqeyO1f7TZgULQVXjF6hUIKjvFbfROwreN11pmQ%3D&reserved=0"></script>
    <style>
        :root { --p: #007AFF; --bg: #F2F2F7; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 100px; }
        .nav { display: flex; background: white; border-bottom: 1px solid #C6C6C8; position: sticky; top: 0; z-index: 100; }
        .nav button { flex: 1; padding: 15px; border: none; background: none; font-weight: 600; color: #8E8E93; }
        .nav button.active { color: var(--p); border-bottom: 3px solid var(--p); }
        .container { padding: 16px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .info { flex: 1; margin-left: 10px; }
        .info h4 { margin: 0; font-size: 16px; }
        .info p { margin: 2px 0 0 0; font-size: 13px; color: #8E8E93; }
        .btn-full { background: #1C1C1E; color: white; width: 100%; padding: 20px; font-size: 17px; border-radius: 14px; border: none; font-weight: bold; margin-bottom: 20px; }
        .btn-add { background: var(--p); color: white; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="nav">
    <button id="t1" onclick="tab('run')" class="active">RUN</button>
    <button id="t2" onclick="tab('base')">Î’Î‘Î£Î—</button>
    <button id="t3" onclick="tab('set')">âš™ï¸</button>
</div>

<div id="run-page" class="container">
    <button class="btn-full" onclick="startRoute()">ğŸš€ START FULL ROUTE</button>
    <div id="run-list"></div>
</div>

<div id="base-page" class="container hidden">
    <input type="text" id="search" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·..." style="width:100%; padding:12px; border-radius:10px; border:1px solid #C6C6C8; margin-bottom:15px;" onkeyup="render()">
    <div id="base-list"></div>
</div>

<div id="set-page" class="container hidden">
    <textarea id="bulk" style="width:100%; height:150px; border-radius:10px; padding:10px;" placeholder="ÎŒÎ½Î¿Î¼Î± | Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·"></textarea>
    <button onclick="save()" style="width:100%; padding:15px; background:green; color:white; border:none; border-radius:10px; margin-top:10px;">Î‘Î ÎŸÎ˜Î—ÎšÎ•Î¥Î£Î—</button>
    <button onclick="localStorage.clear(); location.reload();" style="width:100%; margin-top:40px; color:red; background:none; border:none;">Î”Î™Î‘Î“Î¡Î‘Î¦Î— ÎŸÎ›Î©Î</button>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('delivery_db') || '[]');
    let rn = JSON.parse(localStorage.getItem('delivery_rn') || '[]');

    function tab(t) {
        document.getElementById('run-page').className = t=='run'?'container':'hidden';
        document.getElementById('base-page').className = t=='base'?'container':'hidden';
        document.getElementById('set-page').className = t=='set'?'container':'hidden';
    }

    function save() {
        document.getElementById('bulk').value.split('\n').forEach(l => {
            let p = l.split('|');
            if(p[1]) db.push({n: p[0].trim(), a: p[1].trim()});
        });
        localStorage.setItem('delivery_db', JSON.stringify(db));
        alert('Î— Î’Î¬ÏƒÎ· ÎµÎ½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎµ!'); render();
    }

    function render() {
        let s = document.getElementById('search').value.toLowerCase();
        let list = document.getElementById('base-list'); list.innerHTML = '';
        db.filter(i => i.n.toLowerCase().includes(s)).forEach(i => {
            let d = document.createElement('div'); d.className = 'card';
            d.innerHTML = `<div class="info"><h4>${i.n}</h4><p>${i.a}</p></div><button class="btn-add">+</button>`;
            d.querySelector('button').onclick = () => { rn.push(i); localStorage.setItem('delivery_rn', JSON.stringify(rn)); renderRun(); };
            list.appendChild(d);
        });
    }

    function renderRun() {
        let list = document.getElementById('run-list'); list.innerHTML = '';
        rn.forEach((i, idx) => {
            let d = document.createElement('div'); d.className = 'card'; d.dataset.id = idx;
            d.innerHTML = `<div style="color:#C6C6C8">â˜°</div><div class="info"><h4>${i.n}</h4><p>${i.a}</p></div>`;
            list.appendChild(d);
        });
    }

    function startRoute() {
        if(rn.length === 0) return;
       
        // ÎšÎ±Î¸Î±ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î¹Ï‚ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ Ï„Î¹Ï‚ ÎµÎ½ÏÎ½Î¿Ï…Î¼Îµ Î¼Îµ ÎºÏŒÎ¼Î¼Î±
        let allAddresses = rn.map(i => i.a.trim()).join(' to:');
       
        // Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î¿ ÎµÎ¹Î´Î¹ÎºÏŒ URL Ï€Î¿Ï… Î±Î½Î¿Î¯Î³ÎµÎ¹ ÎœÎŸÎÎŸ Ï„Î·Î½ ÎµÏ†Î±ÏÎ¼Î¿Î³Î® Google Maps
        // Î— Î¼Î¿ÏÏ†Î® ÎµÎ¯Î½Î±Î¹: comgooglemaps://?saddr=&daddr=Address1+to:Address2+to:Address3
        let url = "comgooglemaps://?saddr=&daddr=" + encodeURIComponent(allAddresses) + "&directionsmode=driving";
       
        window.location.href = url;
    }

    new Sortable(document.getElementById('run-list'), { animation: 150, onEnd: () => {
        let newRn = [];
        document.querySelectorAll('#run-list .card').forEach(el => newRn.push(rn[el.dataset.id]));
        rn = newRn; localStorage.setItem('delivery_rn', JSON.stringify(rn));
    }});

    render(); renderRun();
</script>
</body>
</html>
