<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Delivery Tool v64</title>
    <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FSortable%2F1.15.0%2FSortable.min.js&data=05%7C02%7C%7C2e9c37ede0d74bb01a5908de6f81031f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639070797039993191%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=5CuP9OLDf1iIw%2B6qcMlIGum7yVFaQR1rfSNdOHEf2po%3D&reserved=0"></script>
    <style>
        body { font-family: sans-serif; margin: 0; padding-bottom: 80px; background: #000; color: #fff; }
        .header { background: #000; color: white; padding: 15px; text-align: center; border-bottom: 1px solid #222; }
        .nav-tabs { display: flex; background: #111; position: sticky; top: 0; z-index: 99; border-bottom: 1px solid #222; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; color: #555; font-weight: bold; cursor: pointer; }
        .tab-btn.active { color: #4CAF50; border-bottom: 3px solid #4CAF50; }
        .container { padding: 15px; }
        .search-box { width: 100%; padding: 12px; border: 1px solid #333; border-radius: 8px; margin-bottom: 10px; box-sizing: border-box; font-size: 16px; background: #1a1a1a; color: white; }
        .card { background: #1c1c1e; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #2c2c2e; }
        .card-info { flex-grow: 1; }
        .card-name { font-weight: bold; font-size: 17px; color: #fff; }
        .card-address { font-size: 14px; color: #8e8e93; margin-top: 3px; }
        .badge { background: #4CAF50; color: #000; min-width: 24px; height: 24px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; margin-right: 8px; }
        .btn-add { background: #4CAF50; color: white; width: 45px; height: 45px; font-size: 25px; border: none; border-radius: 8px; }
        .btn-nav { background: #0a84ff; color: white; width: 100%; padding: 15px; font-size: 18px; margin-top: 15px; border-radius: 10px; border: none; font-weight: bold; }
        .hidden { display: none; }
        textarea { width: 100%; height: 200px; padding: 10px; border-radius: 8px; border: 1px solid #333; background: #1a1a1a; color: white; }
    </style>
</head>
<body>

<div class="nav-tabs">
    <button class="tab-btn active" onclick="showTab('customers')">Î Î•Î›Î‘Î¤Î•Î£</button>
    <button class="tab-btn" onclick="showTab('route')">Î”Î™Î‘Î”Î¡ÎŸÎœÎ—</button>
    <button class="tab-btn" onclick="showTab('import')">âš™ï¸</button>
</div>

<div id="customersTab" class="container">
    <input type="text" class="search-box" id="searchInput" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·..." oninput="renderCustomers()">
    <div id="customerList"></div>
</div>

<div id="routeTab" class="container hidden">
    <div id="routeList"></div>
    <button class="btn-nav" onclick="startNavigation()">ğŸš€ Î•ÎÎ‘Î¡ÎÎ— NAVIGATION</button>
</div>

<div id="importTab" class="container hidden">
    <h3>Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® / Backup</h3>
    <textarea id="importArea"></textarea>
    <button class="btn-nav" style="background:#4CAF50" onclick="importData()">Î‘Î ÎŸÎ˜Î—ÎšÎ•Î¥Î£Î—</button>
    <button class="btn-nav" style="background:#ff9500; margin-top:20px" onclick="exportData()">ğŸ’¾ Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î— Î’Î‘Î£Î—Î£ (BACKUP)</button>
</div>

<script>
    // Î•Î”Î© Î•Î™ÎÎ‘Î™ Î¤ÎŸ ÎœÎ¥Î£Î¤Î™ÎšÎŸ: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï€Î¿Ï… ÎµÎ¯Ï‡ÎµÏ‚ ÎµÏ‡Î¸Î­Ï‚
    let customers = JSON.parse(localStorage.getItem('savedCustomers') || '[]');
    let route = JSON.parse(localStorage.getItem('deliveryRoute') || '[]');

    function save() {
        localStorage.setItem('savedCustomers', JSON.stringify(customers));
        localStorage.setItem('deliveryRoute', JSON.stringify(route));
    }

    function showTab(tab) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        event.currentTarget.classList.add('active');
        document.getElementById(tab + 'Tab').classList.remove('hidden');
        if(tab === 'customers') renderCustomers();
    }

    function renderCustomers() {
        const list = document.getElementById('customerList');
        const search = document.getElementById('searchInput').value.toLowerCase();
        const filtered = customers.filter(c => c.name.toLowerCase().includes(search));
       
        list.innerHTML = filtered.map((c) => {
            const idx = customers.findIndex(gc => gc.name === c.name) + 1;
            return `
            <div class="card">
                <div class="card-info">
                    <div class="card-name"><span class="badge">${idx}</span>${c.name}</div>
                    <div class="card-address">${c.address}</div>
                </div>
                <button class="btn-add" onclick="addToRoute('${c.name.replace(/'/g, "\\'")}')">+</button>
            </div>
        `}).join('');
    }

    function addToRoute(name) {
        const cust = customers.find(c => c.name === name);
        if(!route.find(r => r.name === name)) {
            route.push(cust);
            save();
            alert('Î ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ!');
        }
    }

    function importData() {
        const text = document.getElementById('importArea').value;
        if(!text) return;
        text.split('\n').forEach(line => {
            const parts = line.split('..').map(p => p.trim());
            if(parts.length >= 2) {
                const newData = { name: parts[0], address: parts[1], time: parts[2] || '', note: parts[3] || '' };
                const idx = customers.findIndex(c => c.name === newData.name);
                if(idx > -1) customers[idx] = newData; else customers.push(newData);
            }
        });
        customers.sort((a,b) => a.name.localeCompare(b.name));
        save();
        renderCustomers();
    }

    function exportData() {
        const text = customers.map(c => `${c.name} .. ${c.address} .. ${c.time} .. ${c.note}`).join('\n');
        navigator.clipboard.writeText(text).then(() => alert('Î¤Î¿ Backup Î±Î½Ï„Î¹Î³ÏÎ¬Ï†Î·ÎºÎµ! Î¦ÏÎ»Î±Î¾Î­ Ï„Î¿ ÏƒÎµ Î­Î½Î± Note.'));
    }

    function startNavigation() {
        if(!route.length) return;
        window.open("https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F&data=05%7C02%7C%7C2e9c37ede0d74bb01a5908de6f81031f%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639070797040007391%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=fE67B853Yx4rTbWa9bAosNbqUcXFzxLhwDnfx%2B%2FdFas%3D&reserved=0" + route.map(r => encodeURIComponent(r.address)).join('/'), '_blank');
    }

    window.onload = () => { renderCustomers(); };
</script>
</body>
</html>
