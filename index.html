<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Delivery Pro Elite</title>
    <script src="https://emea01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2FSortable%2F1.15.0%2FSortable.min.js&data=05%7C02%7C%7C1e07e97be52f4b93f62208de6c3e69f9%7C84df9e7fe9f640afb435aaaaaaaaaaaa%7C1%7C0%7C639067212466687048%7CUnknown%7CTWFpbGZsb3d8eyJFbXB0eU1hcGkiOnRydWUsIlYiOiIwLjAuMDAwMCIsIlAiOiJXaW4zMiIsIkFOIjoiTWFpbCIsIldUIjoyfQ%3D%3D%7C0%7C%7C%7C&sdata=QavU%2BGRXxjJ4SwLrF0De3W8JdjYQEOttLELCts8ikcE%3D&reserved=0"></script>
    <style>
        :root { --p: #30d158; --bg: #1c1c1e; --card: #2c2c2e; --txt: #ffffff; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding-bottom: 120px; color: var(--txt); }
       
        /* Nav Bar */
        .nav { display: flex; background: #000; padding-top: 40px; border-bottom: 1px solid #38383a; position: sticky; top: 0; z-index: 100; }
        .nav button { flex: 1; padding: 18px; border: none; background: none; font-weight: 700; color: #8e8e93; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .nav button.active { color: var(--p); border-bottom: 3px solid var(--p); }

        .container { padding: 16px; max-width: 600px; margin: auto; }

        /* Stats & Header */
        .stats-bar { background: #2c2c2e; padding: 15px; border-radius: 14px; margin-bottom: 20px; border-left: 5px solid var(--p); display: flex; justify-content: space-between; align-items: center; }
        .stats-bar div { font-size: 14px; font-weight: 600; }
       
        /* Buttons */
        .btn-full { background: var(--p); color: #000; width: 100%; padding: 20px; font-size: 18px; border-radius: 16px; border: none; font-weight: 800; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(48, 209, 88, 0.3); active { opacity: 0.7; } }
        .btn-go { background: #30b0c7; color: #000; border: none; padding: 10px 14px; border-radius: 10px; font-weight: bold; }
        .btn-del { background: #ff453a; color: #fff; border: none; padding: 10px; border-radius: 10px; font-weight: bold; margin-left: 8px; }
       
        /* Cards */
        .card { background: var(--card); border-radius: 16px; padding: 15px; margin-bottom: 12px; display: flex; align-items: center; border: 1px solid #38383a; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        .handle { color: #48484a; font-size: 22px; padding-right: 10px; cursor: grab; }
        .info { flex: 1; overflow: hidden; }
        .info h4 { margin: 0; font-size: 17px; font-weight: 600; color: #fff; }
        .info p { margin: 4px 0 0 0; font-size: 13px; color: #8e8e93; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .hidden { display: none; }
        input, textarea { background: #2c2c2e; border: 1px solid #38383a; color: #fff; padding: 15px; border-radius: 12px; width: 100%; box-sizing: border-box; font-size: 16px; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="nav">
    <button id="t1" onclick="tab('run')" class="active">Î”Î™Î‘Î”Î¡ÎŸÎœÎ—</button>
    <button id="t2" onclick="tab('base')">Î Î•Î›Î‘Î¤Î•Î£</button>
    <button id="t3" onclick="tab('set')">âš™ï¸</button>
</div>

<div id="run-page" class="container">
    <div class="stats-bar">
        <div>ğŸ“ <span id="total-stops">0 Î£Ï„Î¬ÏƒÎµÎ¹Ï‚</span></div>
        <div>â³ <span id="total-time">~ 0 Î»ÎµÏ€Ï„Î¬</span></div>
    </div>
   
    <button class="btn-full" onclick="startRoute()">ğŸš€ Î•ÎÎ‘Î¡ÎÎ— NAVIGATION</button>
   
    <div id="run-list"></div>
   
    <button onclick="clearRun()" style="width:100%; color:#ff453a; background:none; border:none; padding:20px; font-weight:600; font-size:14px;">âŒ ÎšÎ‘Î˜Î‘Î¡Î™Î£ÎœÎŸÎ£ Î›Î™Î£Î¤Î‘Î£ Î—ÎœÎ•Î¡Î‘Î£</button>
</div>

<div id="base-page" class="container hidden">
    <input type="text" id="search" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€ÎµÎ»Î¬Ï„Î·..." onkeyup="render()">
    <div id="base-list" style="margin-top:10px;"></div>
</div>

<div id="set-page" class="container hidden">
    <h3 style="margin-bottom:20px;">Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® ÏƒÏ„Î· Î’Î¬ÏƒÎ·</h3>
    <textarea id="bulk" rows="10" placeholder="ÎŒÎ½Î¿Î¼Î± ÎœÎ±Î³Î±Î¶Î¹Î¿Ï | Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·"></textarea>
    <button onclick="save()" style="width:100%; padding:18px; background:var(--p); color:#000; border:none; border-radius:12px; font-weight:800; margin-top:10px;">Î‘Î ÎŸÎ˜Î—ÎšÎ•Î¥Î£Î—</button>
   
    <div style="margin-top:50px; padding:15px; border:1px dashed #48484a; border-radius:12px;">
        <p style="font-size:12px; color:#8e8e93; margin:0;">Î ÏÎ¿ÏƒÎ¿Ï‡Î®: Î— Î¿Î»Î¹ÎºÎ® Î´Î¹Î±Î³ÏÎ±Ï†Î® ÏƒÎ²Î®Î½ÎµÎ¹ Ï„Î± Ï€Î¬Î½Ï„Î± Î±Ï€ÏŒ Ï„Î· Î¼Î½Î®Î¼Î· Ï„Î¿Ï… ÎºÎ¹Î½Î·Ï„Î¿Ï.</p>
        <button onclick="if(confirm('Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½;')) { localStorage.clear(); location.reload(); }" style="color:#ff453a; background:none; border:none; font-weight:bold; margin-top:10px; padding:0;">âš ï¸ ÎŸÎ›Î™ÎšÎ— Î”Î™Î‘Î“Î¡Î‘Î¦Î—</button>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('delivery_db') || '[]');
    let rn = JSON.parse(localStorage.getItem('delivery_rn') || '[]');

    function tab(t) {
        document.getElementById('run-page').className = t=='run'?'container':'hidden';
        document.getElementById('base-page').className = t=='base'?'container':'hidden';
        document.getElementById('set-page').className = t=='set'?'container':'hidden';
        document.getElementById('t1').classList.toggle('active', t=='run');
        document.getElementById('t2').classList.toggle('active', t=='base');
        document.getElementById('t3').classList.toggle('active', t=='set');
    }

    function save() {
        const lines = document.getElementById('bulk').value.split('\n');
        lines.forEach(l => {
            let p = l.split('|');
            if(p[1]) db.push({n: p[0].trim(), a: p[1].trim()});
        });
        localStorage.setItem('delivery_db', JSON.stringify(db));
        document.getElementById('bulk').value = '';
        alert('Î— Î’Î¬ÏƒÎ· ÎµÎ½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎµ!'); render();
    }

    function render() {
        let s = document.getElementById('search').value.toLowerCase();
        let list = document.getElementById('base-list'); list.innerHTML = '';
        db.filter(i => i.n.toLowerCase().includes(s)).forEach(i => {
            let d = document.createElement('div'); d.className = 'card';
            d.innerHTML = `<div class="info"><h4>${i.n}</h4><p>${i.a}</p></div><button class="btn-go" style="background:var(--p); font-size:20px;">+</button>`;
            d.querySelector('button').onclick = () => { rn.push(i); updateRn(); };
            list.appendChild(d);
        });
    }

    function renderRun() {
        let list = document.getElementById('run-list'); list.innerHTML = '';
        rn.forEach((i, idx) => {
            let d = document.createElement('div'); d.className = 'card'; d.dataset.id = idx;
            d.innerHTML = `
                <div class="handle">â˜°</div>
                <div class="info"><h4>${i.n}</h4><p>${i.a}</p></div>
                <button class="btn-go" onclick="singleGo('${i.a}')">GO</button>
                <button class="btn-del" onclick="del(${idx})">âœ•</button>
            `;
            list.appendChild(d);
        });
       
        // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï‡ÏÏŒÎ½Î¿Ï…: 10 Î»ÎµÏ€Ï„Î¬ Î±Î½Î¬ ÏƒÏ„Î¬ÏƒÎ· + 5 Î»ÎµÏ€Ï„Î¬ Î¿Î´Î®Î³Î·ÏƒÎ· Î±Î½Î¬Î¼ÎµÏƒÎ±
        document.getElementById('total-stops').innerText = rn.length + ' Î£Ï„Î¬ÏƒÎµÎ¹Ï‚';
        document.getElementById('total-time').innerText = '~ ' + (rn.length * 15) + ' Î»ÎµÏ€Ï„Î¬';
    }

    function updateRn() { localStorage.setItem('delivery_rn', JSON.stringify(rn)); renderRun(); }
    function del(idx) { rn.splice(idx, 1); updateRn(); }
    function clearRun() { if(confirm('Î˜Î­Î»ÎµÏ„Îµ Î½Î± Î±Î´ÎµÎ¹Î¬ÏƒÎµÏ„Îµ Ï„Î· ÏƒÎ·Î¼ÎµÏÎ¹Î½Î® Î»Î¯ÏƒÏ„Î±;')) { rn = []; updateRn(); } }
    function singleGo(a) { window.location.href = "comgooglemaps://?daddr=" + encodeURIComponent(a) + "&directionsmode=driving"; }

    function startRoute() {
        if(rn.length === 0) return alert('Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ Î¼ÎµÏÎ¹ÎºÎ­Ï‚ ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Ï€ÏÏÏ„Î±!');
        let allAddresses = rn.map(i => i.a.trim()).join(' to:');
        window.location.href = "comgooglemaps://?saddr=&daddr=" + encodeURIComponent(allAddresses) + "&directionsmode=driving";
    }

    new Sortable(document.getElementById('run-list'), {
        handle: '.handle',
        animation: 150,
        onEnd: () => {
            let newRn = [];
            document.querySelectorAll('#run-list .card').forEach(el => newRn.push(rn[el.dataset.id]));
            rn = newRn; updateRn();
        }
    });

    render(); renderRun();
</script>
</body>
</html>
